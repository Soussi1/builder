module.exports=function(r){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=r,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=9)}([function(e,t,r){var n=r(1),a=r(5);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},function(e,t,o){"use strict";var r,n,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=(n={},function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}),d=[];function u(e){for(var t=-1,r=0;r<d.length;r++)if(d[r].identifier===e){t=r;break}return t}function c(e,t){for(var r={},n=[],a=0;a<e.length;a++){var o=e[a],i=t.base?o[0]+t.base:o[0],l=r[i]||0,c="".concat(i," ").concat(l);r[i]=l+1;var s=u(c),m={css:o[1],media:o[2],sourceMap:o[3]};-1!==s?(d[s].references++,d[s].updater(m)):d.push({identifier:c,updater:function(t,e){var r,n,a;{var o;a=e.singleton?(o=b++,r=y=y||p(e),n=f.bind(null,r,o,!1),f.bind(null,r,o,!0)):(r=p(e),n=function(e,t,r){var n=r.css,a=r.media,o=r.sourceMap;a?e.setAttribute("media",a):e.removeAttribute("media");o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */"));if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,r,e),function(){!function(e){if(null===e.parentNode)return;e.parentNode.removeChild(e)}(r)})}return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else a()}}(m,t),references:1}),n.push(c)}return n}function p(e){var t,r=document.createElement("style"),n=e.attributes||{};if(void 0!==n.nonce||(t=o.nc)&&(n.nonce=t),Object.keys(n).forEach(function(e){r.setAttribute(e,n[e])}),"function"==typeof e.insert)e.insert(r);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(r)}return r}var l,s=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function f(e,t,r,n){var a,o,i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;e.styleSheet?e.styleSheet.cssText=s(t,i):(a=document.createTextNode(i),(o=e.childNodes)[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a))}var y=null,b=0;e.exports=function(e,i){(i=i||{}).singleton||"boolean"==typeof i.singleton||(i.singleton=a());var l=c(e=e||[],i);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var t=0;t<l.length;t++){var r=u(l[t]);d[r].references--}for(var n=c(e,i),a=0;a<l.length;a++){var o=u(l[a]);0===d[o].references&&(d[o].updater(),d.splice(o,1))}l=n}}}},function(e,t,r){"use strict";e.exports=function(r){var c=[];return c.toString=function(){return this.map(function(e){var t=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=function(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(r," */")}(n),o=n.sources.map(function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")});return[r].concat(o).concat([a]).join("\n")}return[r].join("\n")}(e,r);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t}).join("")},c.i=function(e,t,r){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(n[o]=!0)}for(var i=0;i<e.length;i++){var l=[].concat(e[i]);r&&n[l[0]]||(t&&(l[2]?l[2]="".concat(t," and ").concat(l[2]):l[2]=t),c.push(l))}},c}},function(e,t,r){var n=r(1),a=r(6);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},function(e){e.exports=JSON.parse('[{"name":"Ile-de-France","coordi":[2.5,48.7],"zoom":140},{"name":"Normandie","coordi":[0,49.1],"zoom":90},{"name":"Grand Est","coordi":[5.5,48.6],"zoom":60},{"name":"Nouvelle-Aquitaine","coordi":[0.6,44.7],"zoom":45},{"name":"Auvergne-Rhône-Alpes","coordi":[4.5,45.3],"zoom":60},{"name":"Bourgogne-Franche-Comté","coordi":[4.8,47.2],"zoom":70},{"name":"Bretagne","coordi":[-3,48.1],"zoom":100},{"name":"Centre-Val de Loire","coordi":[1.7,47.5],"zoom":65},{"name":"Corse","coordi":[9,42],"zoom":120},{"name":"Occitanie","coordi":[2.1,43.6],"zoom":70},{"name":"Hauts-de-France","coordi":[2.8,49.9],"zoom":70},{"name":"Provence-Alpes-Côte d\'Azur","coordi":[6,43.9],"zoom":80},{"name":"Pays de la Loire","coordi":[-0.7,47.3],"zoom":80}]')},function(e,t,r){(t=r(2)(!1)).push([e.i,".navigationShip{\n    display: inline;\n    background: #eee;\n    padding: 6px;\n    border-radius: 16px;\n    padding-left: 31px;\n    padding-right: 31px;\n    margin-left: 6px;\n    padding-top: 4px;\n    font-weight: 600;\n    font-family: Calibri, sans-serif\n}\n\n.title{\n    margin-bottom: 6px;\n    margin-top: 6px;\n    margin-left: 0px;\n    padding: 6px;\n    padding-left: 23px;\n}\n\n.chip_good{\n      \n    padding: 7px;\n    border-radius: 15px;\n    margin-right: 10px;\n    box-shadow: 0px 0px 5px 1px #757575;\n}\n\n.list{\n    background: #f5f5f5 !important;\n    border-radius: 11px !important;\n    box-shadow: 4px 4px 5px -3px #878787 !important;\n    width: 100% !important;\n    height: 36rem !important;\n    overflow: auto !important;\n}\n\n.a{\n    stroke-opacity:0.5;\n    opacity:1;\n    -webkit-filter: drop-shadow( 0px 0px 1px rgba(0, 0, 0, .6));\n    \n}\n\n\na{\n    color: #fff;\n}\na:hover{\n    color: #000;\n}\n\n.chip_good{\n    padding: 7px;\n    border-radius: 15px;\n    margin-right: 10px;\n    box-shadow: 0px 0px 5px 1px #757575;\n}\n\n.customS{\n    padding-bottom: 1px !important;\n    padding-top: 5px !important;\n    margin-top: -8px !important;\n}\n\n#demo-simple-select-placeholder-label > i {\n    position: fixed;\n    margin-left: -23px;\n    margin-top: 6px;\n}\ndiv#demo-simple-select-placeholder-label {\n    background: #fff0;\n}\n\n.MuiTableCell-root {\n    padding: 10px !important;\n}\n.MuiTableCell-root {\n    padding-right: 0px !important;\n}\n.MuiTable-root {\n    width: 60% !important;\n}\n\n.chip_matrix{\n    padding: 15px;\n    padding-bottom: 10px;\n    padding-top: 20px;\n    border-radius: 15px;\n    margin-right: 10px;\n    font-size: 0px;\n    /* box-shadow: 0px 0px 5px 1px #757575; */\n}\n.subTitles{\n    font-weight: bold;\n}\n\n.MuiTableCell-root.MuiTableCell-body.headerTitles.MuiTableCell-alignCenter{\n    font-size: 20px;\n}\n.MuiPaper-root.MuiPaper-elevation1.MuiPaper-rounded{\n    color:white;\n    font-weight: bold;\n    font-size: 16px;\n}\n/* .MuiTypography-root.MuiTypography-body1.MuiTypography-gutterBottom.MuiTypography-alignCenter{\n    color: black;\n    font-weight: bold;\n    font-size: 17px;\n} */\n\n.MuiTypography-root.cardST.MuiTypography-body1.MuiTypography-colorTextSecondary.MuiTypography-gutterBottom{\n    font-size: 20px;\n}\n\n.MuiButton-label{\n    color:white;\n}\n.MuiGrid-root.MuiGrid-item.MuiGrid-grid-xs-12.MuiGrid-grid-sm-2{\n    min-width: fit-content;\n}\n",""]),e.exports=t},function(e,t,r){(t=r(2)(!1)).push([e.i,'.indicatorCell {\n    font-size: 18px;\n    font-family: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS", sans-serif;\n    font-weight: bold;\n    color: rgb(0, 0, 0);\n    \n}\n  \n.cellContent {\ntext-align: center;\n\n}\n\n.cellContainer {\n    height: 35px;\n    width: 100%;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.05s ease-in-out;\n    box-shadow: -2px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n    /* transition: transform 1s cubic-bezier(0.25, 0.45, 0.45, 0.95); */\n}\n.cellContainer:hover {\n    /* transform: translate(-1%, -1%) scale(1.05); */\n    transform: scale(1.05);\n    cursor: pointer;\n    \n}\n\n.supCellContainer{\n    height: 35px;\n    width: 100%;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.05s ease-in-out;\n    box-shadow: -2px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n    /* transition: transform 1s cubic-bezier(0.25, 0.45, 0.45, 0.95); */\n}\n\n.headerCellContainer{\n    height: 50px;\n    width: 100%;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.05s ease-in-out;\n    box-shadow: -2px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n}\n.rowCellContainer{\n    height: 35px;\n    width: 100%;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.05s ease-in-out;\n    box-shadow: -2px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n}\n\n\n.titlesRow:hover{\n    cursor: pointer;\n    color:black\n}\n\n.dx-treelist-text-content{\n    width: 100%\n}\n\n/* #site{\n    max-height: 700px;\n} */\n\n.header-titles{\n    padding-left: 3px;\n    padding-right: 3px;\n}\n\n.dx-treelist-rowsview .dx-treelist-collapsed span::before{\n    font-size: 160%;\n    color: black;\n}\n\n.dx-treelist-rowsview .dx-treelist-expanded span::before{\n    font-size: 160%;\n    color: black;\n}\n\n.dx-treelist-empty-space.dx-treelist-collapsed{\n    left: -5px;\n    top: 6px;\n    color: black;\n}\n\n.dx-treelist-empty-space.dx-treelist-expanded{\n    left: -5px;\n    top: 6px;\n    color: black;\n}',""]),e.exports=t},function(e,t,r){var n=r(1),a=r(8);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},function(e,t,r){(t=r(2)(!1)).push([e.i,"#chart {\n    height:300px;\n    width: inherit;\n   \n}\n\n#chart .dx-export-menu-button rect {\n    fill: #1396C1;\n    stroke: black;\n  }\n\n  .dx-texteditor.dx-editor-outlined {\n    background: #f5f5f5;\n    border: 1px solid #096dd9;\n    border-radius: 4px;\n}",""]),e.exports=t},function(e,t,r){"use strict";function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.r(t),r(0);var u=function(T,I,R,A,j,M){return function(e){var t=0,t=""===e.location.search?0:parseInt(e.location.search.split("?")[1]),r=L(T.useState([]),2),n=r[0],a=r[1],o=L(T.useState(t),2),i=o[0],l=o[1],c=L(T.useState([]),2),s=c[0],m=c[1],d=I.useHistory(),u={type:"FeatureCollection",features:[]},p=[2.5,47],f="Dernière mise à jour : "+(new Date).toLocaleString(),y="Île-de-France",b=[-200,85,200,-60],h=window.location.search,C=new URLSearchParams(h).get("s"),_=L(T.useState(C||""),2),g=_[0],E=_[1];function v(e){var t,r;"FORECAST"===e?(t="select lmf.resource_name, max(concat(c.level,':',c.hexcode)) as color, s.trigramme, lmf.resource_id from bytel_meteo.last_metric_forecast lmf inner join bytel_meteo.color c on lmf.color=c.name inner join bytel_meteo.link l on lmf.resource_id=l.cluster_id inner join bytel_meteo.site s on l.site_id=s.site_id inner join bytel_meteo.metric_definition md on lmf.metric_key=md.metric_key where md.type = '"+e+"' group by lmf.resource_name,l.site_id,s.name,s.trigramme, lmf.resource_id order by color desc;   ",j.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(A.datasources[0]),rawSql:t,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return m(e.response.results.A.tables[0].rows)})):(r="select lmc.resource_name, max(concat(c.level,':',c.hexcode)) as color, s.trigramme, lmc.resource_id from bytel_meteo.last_metric_cluster lmc inner join bytel_meteo.color c on lmc.color=c.name inner join bytel_meteo.link l on lmc.resource_id=l.cluster_id inner join bytel_meteo.site s on l.site_id=s.site_id inner join bytel_meteo.metric_definition md on lmc.metric_key=md.metric_key where md.type = '"+e+"' group by lmc.resource_name,l.site_id,s.name,s.trigramme, lmc.resource_id order by color desc;   ",j.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(A.datasources[0]),rawSql:r,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return m(e.response.results.A.tables[0].rows)}))}function x(e){var t=e.attribute("nom");return{text:"".concat(t),color:"#5b6cf0"}}function O(e){e.forEach(function(e){var t=e.attribute("color");e.applySettings({color:t})})}console.log(A.config.sql[1]),T.useEffect(function(){0===i?v("performance"):1===i?v("capacity"):2===i&&v("FORECAST"),j.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(A.datasources[0]),rawSql:"select geojson from bytel_meteo.region",format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return a(e.response.results.A.tables[0].rows)})},[]),n.map(function(e){u.features.push(JSON.parse(e[0]))});function N(e){var t,r;void 0!==e.target&&(t=e.target.attribute("nom"),r="/dashboard/"+A.id+"/"+t+"?"+i,d.push(r))}function k(e){var t=e.children,r=e.value,n=e.index,a=F(e,["children","value","index"]);return T.createElement("div",D({role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},a),r===n&&T.createElement(R.Box,{p:3},T.createElement(R.Typography,null,t)))}function w(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}u.features.map(function(e){void 0!==s[0]&&e.properties.nom===y&&(e.properties.color=s[0][1].split(":")[1]),0});var S=T.useCallback(function(e){var t=e.mapdata;return T.createElement(M.DevExVectorMap,{id:"vector-map",bounds:b,zoomFactor:25,center:p,onClick:N},T.createElement(M.DevExMapSize,{height:1e3}),T.createElement(M.DevExMapLayer,{dataSource:t,customize:O}),T.createElement(M.DevExMapTooltip,{enabled:!0,customizeTooltip:x},T.createElement(M.DevExMapBorder,{visible:!0}),T.createElement(M.DevExMapFont,{color:"#fff"})),T.createElement(M.DevExMapExport,{enabled:!0}))});return console.log(u),T.createElement(T.Fragment,null,T.createElement(R.Paper,{elevation:2,className:"title"},T.createElement("div",{className:"navigationShip"},T.createElement("p",{style:{display:"inline"}},f))),T.createElement(R.AppBar,{position:"static",color:"default"},T.createElement(R.Tabs,{value:i,onChange:function(e,t){l(t)}},T.createElement(R.Tab,D({label:"Performance"},w(0),{onClick:function(){return v("performance")}})),T.createElement(R.Tab,D({label:"Capacité"},w(1),{onClick:function(){return v("capacity")}})),T.createElement(R.Tab,D({label:"Forecast"},w(3),{onClick:function(){return v("FORECAST")}})),T.createElement(R.Tab,D({label:"Conformité"},w(2))))),T.createElement(k,{value:i,index:0},T.createElement(R.Grid,{container:!0,spacing:3},T.createElement(R.Grid,{item:!0,xs:3},T.createElement("input",{value:g,onInput:function(e){return E(e.target.value)},type:"text",id:"header-search",placeholder:"Search ...",name:"s"}),T.createElement("div",{className:"list"},s.map(function(e){return T.createElement(I.Link,{to:"/dashboard/"+A.id+"/"+y+"/"+e[2]+"/"+e[0]+"?"+i+"?"+e[3]},T.createElement(R.ListItem,{button:!0,style:{height:"25px",padding:"25px",color:"#0a0a0a"}},T.createElement("i",{className:"chip_good",style:{background:e[1].split(":")[1]}}),T.createElement(R.ListItemText,{primary:e[0]})))}))),T.createElement(R.Grid,{item:!0,xs:9},T.createElement(S,{mapdata:u})))),T.createElement(k,{value:i,index:1},T.createElement(R.Grid,{container:!0,spacing:3},T.createElement(R.Grid,{item:!0,xs:3},T.createElement("div",{className:"list"},s.map(function(e){return T.createElement(I.Link,{to:"/dashboard/"+A.id+"/"+y+"/"+e[2]+"/"+e[0]+"?"+i+"?"+e[3]},T.createElement(R.ListItem,{button:!0,style:{height:"25px",padding:"25px",color:"#0a0a0a"}},T.createElement("i",{className:"chip_good",style:{background:e[1].split(":")[1]}}),T.createElement(R.ListItemText,{primary:e[0]})))}))),T.createElement(R.Grid,{item:!0,xs:9},T.createElement(S,{mapdata:u})))),T.createElement(k,{value:i,index:2},T.createElement(R.Grid,{container:!0,spacing:3},T.createElement(R.Grid,{item:!0,xs:3},T.createElement("input",{value:g,onInput:function(e){return E(e.target.value)},type:"text",id:"header-search",placeholder:"Search ...",name:"s"}),T.createElement("div",{className:"list"},s.map(function(e){return T.createElement(I.Link,{to:"/dashboard/"+A.id+"/"+y+"/"+e[2]+"/"+e[0]+"?"+i+"?"+e[3]},T.createElement(R.ListItem,{button:!0,style:{height:"25px",padding:"25px",color:"#0a0a0a"}},T.createElement("i",{className:"chip_good",style:{background:e[1].split(":")[1]}}),T.createElement(R.ListItemText,{primary:e[0]})))}))),T.createElement(R.Grid,{item:!0,xs:9},T.createElement(S,{mapdata:u})))),T.createElement(k,{value:i,index:3},T.createElement(R.Grid,{container:!0},T.createElement("svg",{width:"150pt",height:"150pt",viewBox:"0 0 320 320",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{marginTop:"6%",marginLeft:"auto",marginRight:"auto",width:"100%"}},T.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 154.6 0.0 L 165.2 0.0 C 171.0 1.5 177.3 2.3 182.1 6.0 C 185.6 8.3 189.3 10.6 192.3 13.6 C 230.1 51.5 268.0 89.3 305.9 127.2 C 313.2 134.7 318.4 144.3 320.0 154.7 L 320.0 165.8 C 318.7 170.3 317.9 174.9 315.9 179.1 C 312.8 183.9 309.9 188.9 305.8 192.8 C 268.3 230.4 230.7 267.9 193.2 305.5 C 185.6 313.0 176.0 318.4 165.4 320.0 L 154.7 320.0 C 144.3 318.4 134.8 313.2 127.3 306.0 C 89.3 267.9 51.3 230.0 13.3 191.9 C 10.4 189.0 8.2 185.4 5.9 182.0 C 2.3 177.3 1.7 171.3 0.0 165.8 L 0.0 154.8 C 1.6 143.8 7.3 133.9 15.2 126.2 C 52.7 88.7 90.2 51.2 127.7 13.6 C 131.4 9.9 136.0 7.2 140.4 4.3 C 144.8 2.1 149.8 1.3 154.6 0.0 Z"}),T.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 130.9 25.8 C 139.7 17.1 152.6 11.9 165.0 14.1 C 174.7 14.8 183.5 20.1 190.2 26.8 C 224.5 61.2 258.9 95.5 293.2 129.9 C 296.5 134.3 300.4 138.6 302.1 144.0 C 305.2 150.8 305.1 158.6 304.2 165.9 C 303.3 174.4 297.9 181.3 292.4 187.4 C 256.7 223.0 221.0 258.7 185.4 294.4 C 182.8 296.7 179.6 297.9 176.6 299.5 C 171.6 302.5 165.5 302.3 160.0 303.6 C 155.1 302.5 150.1 302.3 145.4 300.5 C 141.5 298.5 137.3 297.0 134.1 293.9 C 99.6 259.3 65.1 224.9 30.6 190.4 C 27.1 187.2 24.3 183.3 21.2 179.6 C 15.0 171.0 14.4 159.9 15.9 149.8 C 17.7 142.0 22.2 135.3 27.3 129.3 C 61.9 94.8 96.3 60.3 130.9 25.8 Z"}),T.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 164.3 86.4 C 168.8 85.6 174.0 86.2 177.3 89.6 C 181.0 92.9 183.4 98.3 182.0 103.2 C 181.5 108.5 176.9 112.6 172.0 113.9 C 163.1 117.0 152.3 108.4 153.9 98.9 C 155.0 93.4 159.0 88.4 164.3 86.4 Z"}),T.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 101.1 117.8 C 102.1 114.3 103.3 110.5 106.7 108.6 C 117.2 108.7 127.6 108.7 138.0 108.7 C 140.1 108.6 142.1 109.1 144.1 109.5 C 148.2 116.1 153.2 122.1 157.5 128.6 C 159.7 131.9 161.8 136.1 159.8 140.0 C 154.0 150.7 148.0 161.3 142.3 172.1 C 155.4 181.7 167.5 192.5 180.6 202.0 C 184.4 197.9 189.2 193.4 195.2 194.8 C 197.4 195.6 200.0 195.9 201.6 197.7 C 203.7 200.0 205.5 202.6 206.9 205.4 C 209.0 204.4 211.7 204.0 213.8 205.2 C 217.4 207.5 219.2 211.9 219.3 216.0 C 221.5 217.0 223.3 218.4 224.5 220.4 C 230.1 220.0 234.4 224.1 236.6 228.8 C 211.7 229.0 186.9 228.7 162.0 229.1 C 155.9 228.5 149.7 229.6 143.5 228.7 C 144.8 227.2 145.9 225.5 147.0 223.8 C 149.9 222.5 152.9 221.1 156.2 221.1 C 157.9 220.7 159.6 220.1 158.8 217.9 C 160.5 215.3 162.7 212.4 166.3 213.1 C 168.2 209.3 171.3 206.3 175.0 204.2 C 163.8 195.0 152.5 186.0 141.3 176.8 C 140.8 175.5 139.1 176.4 139.5 177.4 C 142.0 180.1 144.9 183.1 144.7 187.0 C 144.9 189.5 143.1 191.6 142.2 193.8 C 139.3 200.7 135.1 207.1 131.8 213.8 C 129.8 218.0 127.6 222.2 125.2 226.2 C 122.6 228.2 118.7 229.6 115.5 228.1 C 113.5 226.6 112.3 224.3 111.6 222.0 C 113.6 214.7 117.9 208.5 120.7 201.5 C 122.9 196.7 125.4 192.0 127.7 187.3 C 121.8 180.0 116.0 172.6 109.8 165.5 C 109.7 172.9 110.1 180.4 109.7 187.8 C 106.8 199.4 103.6 211.0 100.6 222.7 C 99.7 227.6 92.9 230.3 88.9 227.0 C 85.3 225.1 86.1 220.6 86.3 217.2 C 88.6 207.8 91.0 198.5 93.3 189.1 C 93.7 177.9 93.1 166.7 93.6 155.5 C 93.6 151.0 98.2 149.3 100.4 146.1 C 98.0 145.3 96.3 143.3 96.4 140.8 C 94.1 139.2 92.0 137.3 89.5 136.0 C 88.5 133.9 89.9 132.2 91.8 131.5 C 93.5 133.1 95.4 134.5 97.3 135.7 C 98.6 129.8 99.7 123.8 101.1 117.8 Z"}),T.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 113.0 123.3 C 116.6 123.4 120.1 123.4 123.6 123.4 C 119.3 128.0 114.4 132.1 110.3 136.9 C 110.8 132.3 112.1 127.9 113.0 123.3 Z"}),T.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 122.7 156.0 C 128.2 153.5 133.7 151.2 139.2 148.7 C 137.2 153.8 133.8 158.0 131.8 163.0 C 128.6 160.8 125.5 158.6 122.7 156.0 Z"})))))}},be=r(4);function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ce(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(0);var p=function(me,de,ue,pe,fe,ye){return function(n){var e=_e(me.useState([]),2),t=e[0],r=e[1],a=_e(me.useState([]),2),o=a[0],i=a[1],l=_e(me.useState([]),2),c=l[0],s=l[1],m=_e(me.useState(parseInt(n.location.search.split("?")[1])),2),d=m[0],u=m[1],p=_e(me.useState([0]),2),f=p[0],y=p[1],b=_e(me.useState([0]),2),h=b[0],C=b[1],_=_e(me.useState(!1),2),g=_[0],E=_[1],v=_e(me.useState(""),2),x=v[0],O=v[1],N=de.useHistory(),k={type:"FeatureCollection",features:[]},w=n.match.params.regionName,S="Dernière mise à jour : "+(new Date).toLocaleString(),T=[],I=[],R=[-200,85,200,-60],A=[2.5,48.7],j=140;function M(e){var t,r;"FORECAST"===e?(t="select s.trigramme,lmf.resource_name, max(concat(c.level,':',c.hexcode)) as color,lmf.resource_id from bytel_meteo.last_metric_forecast lmf inner join bytel_meteo.color c on lmf.color=c.name inner join bytel_meteo.link l on lmf.resource_id=l.cluster_id inner join bytel_meteo.site s on l.site_id=s.site_id inner join bytel_meteo.metric_definition md on lmf.metric_key=md.metric_key where md.type = '"+e+"' group by lmf.resource_name,l.site_id,s.name,s.trigramme,lmf.resource_id order by color desc",fe.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(pe.datasources[0]),rawSql:t,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return s(e.response.results.A.tables[0].rows)})):(r="select s.trigramme,lmc.resource_name,max(concat(c.level,':',c.hexcode)) as color,lmc.resource_id from bytel_meteo.last_metric_cluster lmc inner join bytel_meteo.color c on lmc.color=c.name inner join bytel_meteo.link l on lmc.resource_id=l.cluster_id inner join bytel_meteo.site s on l.site_id=s.site_id inner join bytel_meteo.metric_definition md on lmc.metric_key=md.metric_key where md.type = '"+e+"' group by lmc.resource_name,l.site_id,s.name,s.trigramme,lmc.resource_id order by color desc;",fe.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(pe.datasources[0]),rawSql:r,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return s(e.response.results.A.tables[0].rows)}))}function D(e,t,r,n){return(n-r)/(t-e)}function F(e,t,r,n,a){var o=D(t,r,n,a);return o*e+(n-o*t)}me.useEffect(function(){var e;0===d?M("performance"):1===d?M("capacity"):2===d&&M("FORECAST"),fe.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(pe.datasources[0]),rawSql:"select geojson,region_id from bytel_meteo.region",format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return r(e.response.results.A.tables[0].rows)}),fe.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(pe.datasources[0]),rawSql:"select name,longitude,latitude,trigramme,site_id,region_id from bytel_meteo.site",format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return i(e.response.results.A.tables[0].rows)}),fe.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(pe.datasources[0]),rawSql:" select * from bytel_meteo.style;",format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return C(e.response.results.A.tables[0].rows)}),e="SELECT lien, array_to_string(array_agg(query.cluster_id),',') FROM (SELECT array_to_string(ARRAY_AGG(l.site_id ORDER BY l.site_id ASC),',') as lien ,l.cluster_id FROM bytel_meteo.link l JOIN bytel_meteo.site s ON l.site_id = s.site_id JOIN bytel_meteo.region r ON s.region_id = r.region_id WHERE l.cluster_id IN (SELECT l.cluster_id FROM bytel_meteo.link l GROUP BY cluster_id HAVING count(cluster_id) > 1) AND r.name = '"+"Ile-de-France"+"' GROUP BY l.cluster_id) as query group by lien",fe.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(pe.datasources[0]),rawSql:e,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return y(e.response.results.A.tables[0].rows)})},[]),t.map(function(e){JSON.parse(e[0]).properties.nom===w&&(k.features.push(JSON.parse(e[0])),k.features[0].properties.id=e[1])}),be.map(function(e){e.name===w&&(A=e.coordi,j=e.zoom)}),o.map(function(e){var t;void 0!==k.features[0]&&e[5]===k.features[0].properties.id&&((t={coordinates:[],attributes:{id:"",name:"",trig:""}}).coordinates.push(e[1],e[2]),t.attributes.id=e[4],t.attributes.name=e[0],t.attributes.trig=e[3],T.push(t))}),h.map(function(e){"Link"===e[0]?e[1]:"LinkHover"===e[0]&&e[1]});for(var L,q,P,J,B=0;B<o.length-1;B++)for(var z,G,W,U,H,Z,Y,V,K,$=B+1;$<=o.length-1;$++){void 0!==T[B]&&void 0!==T[$]&&(T[B].attributes.trig,T[$].attributes.trig,z=T[B].coordinates[0],G=T[B].coordinates[1],W=T[$].coordinates[0],U=T[$].coordinates[1],L=z,q=W,P=G,J=U,H=Math.sqrt(Math.pow(q-L,2)+Math.pow(J-P,2)),D(z,W,G,U),H<=.07828503179319762&&(V=F(Z=z-.0225,z,W,G,U),K=F(Y=W+.0225,z,W,G,U),T[B].coordinates[0]=Z,T[B].coordinates[1]=V,T[$].coordinates[0]=Y,T[$].coordinates[1]=K))}function Q(e){var t,r;console.log(e),void 0!==e.target&&void 0!==e.target.layer&&(t=e.target.attribute("trig"),e.target&&"marker"===e.target.layer.type&&0===e.event.button?(r="/dashboard/"+pe.id+"/"+n.match.params.regionName+"/"+t+"?"+d,N.push(r)):e.target&&"marker"===e.target.layer.type&&2===e.event.button&&(window.document.getElementsByTagName("circle"),window.addEventListener("contextmenu",function(e){return e.preventDefault()}),E(!0),O(e.target.attribute("trig"))))}function X(e){var t=e.children,r=e.value,n=e.index,a=Ce(e,["children","value","index"]);return me.createElement("div",he({role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},a),r===n&&me.createElement(ue.Box,{p:3},me.createElement(ue.Typography,null,t)))}function ee(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function te(){for(var e=0;e<document.getElementsByTagName("tspan").length;e++)document.getElementsByTagName("tspan")[e].setAttribute("x",40),"MLB"===document.getElementsByTagName("tspan")[e].innerHTML&&(document.getElementsByTagName("tspan")[e].setAttribute("x",-40),document.getElementsByTagName("tspan")[e].setAttribute("y",20))}function re(e){e.forEach(function(e){var t=e.attribute("trig"),r="",n=0;c.map(function(e){t===e[0]&&e[2].split(":")[0]>n&&(r=e[2].split(":")[1],n=e[2].split(":")[0])}),e.applySettings({color:r,borderColor:r,size:25,borderWidth:7,hoveredBorderWidth:18,hoverEnabled:!1})})}var ne={family:'"Calibri", sans-serif',size:18,weight:600};function ae(){E(!1)}f.map(function(e){var c;void 0!==e[0]&&(c=[],e[0].replace(/"/g,"").split(",").map(function(e){c.push(parseInt(e))}),T.map(function(e,t,r){for(var n=0;n<c.length;n++)for(var a=n+1;a<c.length;a++){var o=[],i=[],l=[{coordinates:[]}];o.push(r[c[n]-1].coordinates[0],r[c[n]-1].coordinates[1]),i.push(r[c[a]-1].coordinates[0],r[c[a]-1].coordinates[1]),l[0].coordinates.push(o,i),I.push(l[0])}}))});var oe,ie,le=me.useCallback(function(){var r=[];return c.map(function(e){var t;x===e[0]&&r.push(me.createElement(ue.Grid,{container:!0,spacing:1},me.createElement(ue.Grid,{item:!0,xs:5},me.createElement(ue.Button,{title:e[1],size:"small",variant:"contained",style:{background:e[2].split(":")[1],width:"160px",marginRight:"2px",marginBottom:"2px",color:"#000"}},me.createElement(de.Link,{to:"/dashboard/"+pe.id+"/"+w+"/"+x+"/"+e[1]+"?"+d+"?"+e[3]},15<(t=e[1]).length?t.substring(0,15)+"..":t.substring(0,15))))))}),me.createElement(ye.DevExScrollView,{useNative:!0},r)},[x,c,d]),ce=me.useCallback(function(){return me.createElement(ye.DevExPopup,{height:"auto",width:"auto",maxHeight:"650px",container:".moduleWrapper",visible:g,shadingColor:"transparent",closeOnOutsideClick:!0,onHiding:ae,title:"Information",contentRender:le,showCloseButton:!0,showTitle:!1})},[g,le]);void 0!==k.features&&void 0!==k.features[0]&&(oe=k),void 0!==T[0]&&void 0!==T[0].coordinates[0]&&(ie=T);var se=me.useCallback(function(){return me.createElement(ye.DevExVectorMap,{id:"vector-map",bounds:R,zoomFactor:j,center:A,onDrawn:te,onClick:Q},me.createElement(ye.DevExMapSize,{height:1e3}),me.createElement(ye.DevExMapLayer,{dataSource:oe}),me.createElement(ye.DevExMapLayer,{dataSource:ie,customize:re},me.createElement(ye.DevExMapLabel,{enabled:!0,dataField:"trig",font:ne})),me.createElement(ye.DevExMapExport,{enabled:!0}))});return console.log(c),me.createElement(me.Fragment,null,me.createElement(ue.Paper,{elevation:2,className:"title"},me.createElement(ue.Chip,{color:"primary",label:"Home",style:{fontWeight:"bold"},className:"back",onClick:function(){N.push("/dashboard/"+pe.id+"?"+d)}}),me.createElement("div",{className:"navigationShip"},me.createElement("p",{onClick:function(){N.push("/dashboard/"+pe.id+"?"+d)},style:{color:"blue",cursor:"pointer",display:"inline"}},"Carte de France"),me.createElement("p",{style:{display:"inline"}}," >",w)),me.createElement("div",{className:"navigationShip"},me.createElement("p",{style:{display:"inline"}},S))),me.createElement(ue.AppBar,{position:"static",color:"default"},me.createElement(ue.Tabs,{value:d,onChange:function(e,t){u(t)}},me.createElement(ue.Tab,he({label:"Performance"},ee(0),{onClick:function(){return M("performance")}})),me.createElement(ue.Tab,he({label:"Capacité"},ee(1),{onClick:function(){return M("capacity")}})),me.createElement(ue.Tab,he({label:"Forecast"},ee(3),{onClick:function(){return M("FORECAST")}})),me.createElement(ue.Tab,he({label:"conformité"},ee(2))))),me.createElement(X,{value:d,index:0},me.createElement(ue.Grid,null,me.createElement(ce,null),me.createElement(se,null))),me.createElement(X,{value:d,index:1},me.createElement(ue.Grid,null,me.createElement(ce,null),me.createElement(se,null))),me.createElement(X,{value:d,index:2},me.createElement(ue.Grid,null,me.createElement(ce,null),me.createElement(se,null))),me.createElement(X,{value:d,index:3},me.createElement("svg",{width:"150pt",height:"150pt",viewBox:"0 0 320 320",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{marginTop:"6%",marginLeft:"auto",marginRight:"auto",width:"100%"}},me.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 154.6 0.0 L 165.2 0.0 C 171.0 1.5 177.3 2.3 182.1 6.0 C 185.6 8.3 189.3 10.6 192.3 13.6 C 230.1 51.5 268.0 89.3 305.9 127.2 C 313.2 134.7 318.4 144.3 320.0 154.7 L 320.0 165.8 C 318.7 170.3 317.9 174.9 315.9 179.1 C 312.8 183.9 309.9 188.9 305.8 192.8 C 268.3 230.4 230.7 267.9 193.2 305.5 C 185.6 313.0 176.0 318.4 165.4 320.0 L 154.7 320.0 C 144.3 318.4 134.8 313.2 127.3 306.0 C 89.3 267.9 51.3 230.0 13.3 191.9 C 10.4 189.0 8.2 185.4 5.9 182.0 C 2.3 177.3 1.7 171.3 0.0 165.8 L 0.0 154.8 C 1.6 143.8 7.3 133.9 15.2 126.2 C 52.7 88.7 90.2 51.2 127.7 13.6 C 131.4 9.9 136.0 7.2 140.4 4.3 C 144.8 2.1 149.8 1.3 154.6 0.0 Z"}),me.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 130.9 25.8 C 139.7 17.1 152.6 11.9 165.0 14.1 C 174.7 14.8 183.5 20.1 190.2 26.8 C 224.5 61.2 258.9 95.5 293.2 129.9 C 296.5 134.3 300.4 138.6 302.1 144.0 C 305.2 150.8 305.1 158.6 304.2 165.9 C 303.3 174.4 297.9 181.3 292.4 187.4 C 256.7 223.0 221.0 258.7 185.4 294.4 C 182.8 296.7 179.6 297.9 176.6 299.5 C 171.6 302.5 165.5 302.3 160.0 303.6 C 155.1 302.5 150.1 302.3 145.4 300.5 C 141.5 298.5 137.3 297.0 134.1 293.9 C 99.6 259.3 65.1 224.9 30.6 190.4 C 27.1 187.2 24.3 183.3 21.2 179.6 C 15.0 171.0 14.4 159.9 15.9 149.8 C 17.7 142.0 22.2 135.3 27.3 129.3 C 61.9 94.8 96.3 60.3 130.9 25.8 Z"}),me.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 164.3 86.4 C 168.8 85.6 174.0 86.2 177.3 89.6 C 181.0 92.9 183.4 98.3 182.0 103.2 C 181.5 108.5 176.9 112.6 172.0 113.9 C 163.1 117.0 152.3 108.4 153.9 98.9 C 155.0 93.4 159.0 88.4 164.3 86.4 Z"}),me.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 101.1 117.8 C 102.1 114.3 103.3 110.5 106.7 108.6 C 117.2 108.7 127.6 108.7 138.0 108.7 C 140.1 108.6 142.1 109.1 144.1 109.5 C 148.2 116.1 153.2 122.1 157.5 128.6 C 159.7 131.9 161.8 136.1 159.8 140.0 C 154.0 150.7 148.0 161.3 142.3 172.1 C 155.4 181.7 167.5 192.5 180.6 202.0 C 184.4 197.9 189.2 193.4 195.2 194.8 C 197.4 195.6 200.0 195.9 201.6 197.7 C 203.7 200.0 205.5 202.6 206.9 205.4 C 209.0 204.4 211.7 204.0 213.8 205.2 C 217.4 207.5 219.2 211.9 219.3 216.0 C 221.5 217.0 223.3 218.4 224.5 220.4 C 230.1 220.0 234.4 224.1 236.6 228.8 C 211.7 229.0 186.9 228.7 162.0 229.1 C 155.9 228.5 149.7 229.6 143.5 228.7 C 144.8 227.2 145.9 225.5 147.0 223.8 C 149.9 222.5 152.9 221.1 156.2 221.1 C 157.9 220.7 159.6 220.1 158.8 217.9 C 160.5 215.3 162.7 212.4 166.3 213.1 C 168.2 209.3 171.3 206.3 175.0 204.2 C 163.8 195.0 152.5 186.0 141.3 176.8 C 140.8 175.5 139.1 176.4 139.5 177.4 C 142.0 180.1 144.9 183.1 144.7 187.0 C 144.9 189.5 143.1 191.6 142.2 193.8 C 139.3 200.7 135.1 207.1 131.8 213.8 C 129.8 218.0 127.6 222.2 125.2 226.2 C 122.6 228.2 118.7 229.6 115.5 228.1 C 113.5 226.6 112.3 224.3 111.6 222.0 C 113.6 214.7 117.9 208.5 120.7 201.5 C 122.9 196.7 125.4 192.0 127.7 187.3 C 121.8 180.0 116.0 172.6 109.8 165.5 C 109.7 172.9 110.1 180.4 109.7 187.8 C 106.8 199.4 103.6 211.0 100.6 222.7 C 99.7 227.6 92.9 230.3 88.9 227.0 C 85.3 225.1 86.1 220.6 86.3 217.2 C 88.6 207.8 91.0 198.5 93.3 189.1 C 93.7 177.9 93.1 166.7 93.6 155.5 C 93.6 151.0 98.2 149.3 100.4 146.1 C 98.0 145.3 96.3 143.3 96.4 140.8 C 94.1 139.2 92.0 137.3 89.5 136.0 C 88.5 133.9 89.9 132.2 91.8 131.5 C 93.5 133.1 95.4 134.5 97.3 135.7 C 98.6 129.8 99.7 123.8 101.1 117.8 Z"}),me.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 113.0 123.3 C 116.6 123.4 120.1 123.4 123.6 123.4 C 119.3 128.0 114.4 132.1 110.3 136.9 C 110.8 132.3 112.1 127.9 113.0 123.3 Z"}),me.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 122.7 156.0 C 128.2 153.5 133.7 151.2 139.2 148.7 C 137.2 153.8 133.8 158.0 131.8 163.0 C 128.6 160.8 125.5 158.6 122.7 156.0 Z"}))))}},ge=(r(3),function(d,e,t,r,n,u){return function(e){for(var t,r=0,n="",a="",o=(t=e).data[t.column.dataField],i=0;i<o.length;i++)void 0!==o[i]&&e.column.metricKey===o[i].metric_key&&e.column.domain===o[i].domain&&(r=o[i].trunc,n=o[i].unit,a=o[i].hexcode);var l,c="",s="",m="";return u.map(function(e){"cellContent"===e[0]&&(c=e[1],s=e[3],m=e[4])}),d.createElement("div",{className:"cellContainer",style:{background:a,borderRadius:"3px",paddingLeft:"4px",paddingRight:"4px"}},d.createElement("div",{className:"cellContent"},d.createElement("span",{className:"indicatorCell",style:{color:c,fontFamily:s,fontWeight:m}},null!==(l=r)?l.toLocaleString("fr-FR"):l," ",n)))}}),Ee=(r(7),function(m,e,t,r,n,d,u,p){return function(){var e=localStorage.getItem("caption"),t=localStorage.getItem("clusterName"),r=localStorage.getItem("metricFullName"),n="",a=0,o=0,i=0,l=0,c="",s=0;return p.map(function(e){"Subtitel"===e[0]?(n=e[1],a=e[2],o=parseInt(e[4],10)):"Titel"===e[0]?(e[1],i=e[2],l=parseInt(e[4],10)):"Labels"===e[0]&&(c=e[1],s=e[2],parseInt(e[4],10))}),m.createElement("div",null,m.createElement("h2",null,"Détails"),m.createElement(d.DevExChart,{id:"chart",dataSource:u},m.createElement(d.DevExChartSeries,{valueField:"value",argumentField:"day",name:e,type:"line",color:"#1396C1"}),m.createElement(d.DevExChartArgumentAxis,{argumentType:"datetime"},m.createElement(d.DevExChartLabel,{visible:!0,format:"shortTime"},m.createElement(d.DevExChartFont,{color:c,size:s})),m.createElement(d.DevExChartGrid,{visible:!0})),m.createElement(d.DevExChartValueAxis,{name:"value"},m.createElement(d.DevExChartValueAxis,{text:"Valeurs"},m.createElement(d.DevExChartFont,{color:"#1396C1"})),m.createElement(d.DevExChartLabel,{visible:!0},m.createElement(d.DevExChartFont,{color:c,size:s}))),m.createElement(d.DevExChartTitle,{text:t},m.createElement(d.DevExChartSubtitle,{text:r},m.createElement(d.DevExChartFont,{color:n,size:a,weight:o})),m.createElement(d.DevExChartFont,{size:i,weight:l})),m.createElement(d.DevExChartTooltip,{container:".dx-popup-content",enabled:!0,customizeTooltip:function(e){return{text:"".concat(e.argumentText,"<br/>").concat("Value : "+e.valueText)}}}),m.createElement(d.DevExChartExport,{id:"Export",enabled:!0}),m.createElement(d.DevExChartZoomAndPan,{argumentAxis:"both",valueAxis:"both"}),m.createElement(d.DevExChartScrollBar,{visible:!0}),m.createElement(d.DevExChartMargin,{left:30,right:30})))}});function c(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function ve(l){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=l.apply(e,i);function a(e){c(n,t,r,a,o,"next",e)}function o(e){c(n,t,r,a,o,"throw",e)}a(void 0)})}}function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Oe(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(0);var f=function(ue,pe,fe,ye,be,he){return function(t){var e=Ne(ue.useState([0]),2),l=e[0],a=e[1],r=Ne(ue.useState([0]),2),o=r[0],n=r[1],i=Ne(ue.useState([0]),2),c=i[0],s=i[1],m=Ne(ue.useState([0]),2),d=m[0],u=m[1],p=Ne(ue.useState(parseInt(t.location.search.split("?")[1])),2),f=p[0],y=p[1],b=Ne(ue.useState([0]),2),h=b[0],C=b[1],_=Ne(ue.useState(!1),2),g=_[0],E=_[1],v=Ne(ue.useState([0]),2),x=v[0],O=v[1],N=Ne(ue.useState([0]),2),k=N[0],w=N[1],S=Ne(ue.useState("1 hour"),2),T=S[0],I=S[1],R=pe.useHistory(),A=t.match.params.regionName,j=t.match.params.siteTrig,M=Ne(ue.useState(""),2),D=M[0],F=M[1],L=screen.availHeight/1.2;console.log(L);var q=[{id:"1 hour",Text:"last hour"},{id:"12 hours",Text:"last 12 hours"},{id:"24 hours",Text:"last 24 hours"},{id:"1 week",Text:"last week"},{id:"1 month",Text:"last month"},{id:"2 months",Text:"last 2 months"},{id:"3 months",Text:"last 3 months"},{id:"6 weeks",Text:"last 6 weeks"},{id:"today",Text:"last day"},{id:"6 months",Text:"last 6 months"},{id:"1 year",Text:"last year"}],P="Dernière mise à jour : "+(new Date).toLocaleString();ue.useEffect(function(){var e=setTimeout(function(){0===f?(z("performance",t.match.params.siteTrig),G("performance"),W("performance"),U("performance",t.match.params.siteTrig)):1===f?(z("capacity",t.match.params.siteTrig),G("capacity"),W("capacity"),U("capacity",t.match.params.siteTrig)):2===f&&(z("FORECAST",t.match.params.siteTrig),G("FORECAST"),W("FORECAST"),U("FORECAST",t.match.params.siteTrig)),be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:" select * from bytel_meteo.style;",format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return u(e.response.results.A.tables[0].rows)})},1);return function(){return clearTimeout(e)}},[f]);var J,B=ge(ue,pe,fe,ye,be,d);function z(e,t){var r,n;"FORECAST"===e?(r="SELECT lmf.resource_name, med.type,med.domain,med.label, TRUNC(cast(lmf.value as decimal),2) as value, lmf.unit, c.hexcode, '-1' as parent,lmf.resource_id as id, mad.metric_key FROM bytel_meteo.matrix_definition mad JOIN bytel_meteo.last_metric_forecast lmf ON mad.metric_key = lmf.metric_key JOIN bytel_meteo.metric_definition med ON mad.metric_key = med.metric_key JOIN bytel_meteo.color c ON lmf.color = c.name WHERE resource_id IN (SELECT c.cluster_id FROM bytel_meteo.site s JOIN bytel_meteo.link l ON s.site_id = l.site_id JOIN bytel_meteo.cluster c ON l.cluster_id = c.cluster_id WHERE s.trigramme = '"+t+"') AND med.type='"+e+"' GROUP BY lmf.resource_name, med.label, lmf.value,c.hexcode,type,med.domain,lmf.unit,lmf.resource_id, mad.metric_key ORDER BY lmf.resource_name, med.type, med.domain,med.label",be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:r,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return a(e.response.results.A.tables[0].rows)})):(n="SELECT lmc.resource_name, med.type,med.domain,med.label, TRUNC(cast(lmc.value as decimal),2) as value, lmc.unit, c.hexcode, '-1' as parent ,lmc.resource_id as id, mad.metric_key FROM bytel_meteo.matrix_definition mad JOIN bytel_meteo.last_metric_cluster lmc ON mad.metric_key = lmc.metric_key JOIN bytel_meteo.metric_definition med ON mad.metric_key = med.metric_key JOIN bytel_meteo.color c ON lmc.color = c.name WHERE resource_id IN (SELECT c.cluster_id FROM bytel_meteo.site s JOIN bytel_meteo.link l ON s.site_id = l.site_id JOIN bytel_meteo.cluster c ON l.cluster_id = c.cluster_id WHERE s.trigramme = '"+t+"') AND med.type='"+e+"' GROUP BY lmc.resource_name, med.label, lmc.value,c.hexcode,med.type,med.domain,lmc.unit,lmc.resource_id, mad.metric_key UNION SELECT lma.resource_name, type,med.domain,med.label, TRUNC(cast(lma.value as decimal) ,2) as value, lma.unit, c.hexcode, a.application_id::text as parent, lma.resource_id as id, mad.metric_key FROM bytel_meteo.matrix_definition mad JOIN bytel_meteo.last_metric_application lma ON mad.metric_key_vm = lma.metric_key JOIN  bytel_meteo.metric_definition med ON mad.metric_key = med.metric_key JOIN bytel_meteo.color c ON lma.color = c.name JOIN bytel_meteo.application a ON lma.application_name=a.name JOIN bytel_meteo.link l ON a.application_id=l.application_id JOIN bytel_meteo.cluster cl ON l.cluster_id=cl.cluster_id JOIN bytel_meteo.site s ON l.site_id=s.site_id WHERE s.trigramme = '"+t+"' AND med.type = '"+e+"' GROUP BY lma.resource_name, med.label, lma.value,c.hexcode,type,med.domain,lma.unit,a.application_id,lma.resource_id,lma.metric_key, mad.metric_key UNION SELECT lma.resource_name, med.type,med.domain,med.label, TRUNC(cast(lma.value as decimal) ,2) as value, lma.unit, c.hexcode, a.application_id::text as parent,lma.resource_id as id, mad.metric_key FROM bytel_meteo.matrix_definition mad JOIN bytel_meteo.last_metric_application lma ON mad.metric_key_vm_bse = lma.metric_key JOIN bytel_meteo.metric_definition med ON mad.metric_key = med.metric_key JOIN bytel_meteo.color c ON lma.color = c.name JOIN bytel_meteo.application a ON lma.application_name=a.name JOIN bytel_meteo.link l ON a.application_id=l.application_id JOIN bytel_meteo.cluster cl ON l.cluster_id=cl.cluster_id JOIN bytel_meteo.site s ON l.site_id=s.site_id WHERE s.trigramme = '"+t+"' AND med.type = '"+e+"' GROUP BY lma.resource_name, med.label, lma.value,c.hexcode,type,med.domain,lma.unit,a.application_id,lma.resource_id, mad.metric_key UNION SELECT app.name,null as type,null as domain,null as label,null as value,null as unit,null as hexcode,c.cluster_id as parent,app.application_id::text as id,null FROM bytel_meteo.application app JOIN bytel_meteo.link l ON app.application_id=l.application_id JOIN bytel_meteo.cluster c ON l.cluster_id=c.cluster_id JOIN bytel_meteo.site s ON l.site_id=s.site_id WHERE s.trigramme = '"+t+"' AND app.name <> 'NO APP' ORDER BY resource_name, type, domain,label",be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:n,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return a(e.response.results.A.tables[0].rows)}))}function G(e){var t="SELECT med.domain,count(med.domain) FROM bytel_meteo.matrix_definition mad LEFT JOIN bytel_meteo.metric_definition med ON mad.metric_key = med.metric_key where type='"+e+"' group  by type, med.domain ORDER BY type, med.domain";be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:t,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return n(e.response.results.A.tables[0].rows)})}function W(e){var t="SELECT med.type,med.domain,med.label,med.metric_key FROM bytel_meteo.matrix_definition mad left JOIN bytel_meteo.metric_definition med ON mad.metric_key = med.metric_key where type = '"+e+"' and med.label <> 'Nombre de CPU utilisables' GROUP BY med.type, med.domain, med.label, med.metric_key ORDER BY  med.type, med.domain, med.label";be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:t,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return s(e.response.results.A.tables[0].rows)})}function U(e,t){var r,n;"FORECAST"===e?(r="select lmf.resource_name, max(concat(c.level,':',c.hexcode)) as color, s.trigramme, lmf.resource_id as id from bytel_meteo.last_metric_forecast lmf inner join bytel_meteo.color c on lmf.color=c.name inner join bytel_meteo.link l on lmf.resource_id=l.cluster_id inner join bytel_meteo.site s on l.site_id=s.site_id inner join bytel_meteo.metric_definition md on lmf.metric_key=md.metric_key where md.type = '"+e+"' group by lmf.resource_name,l.site_id,s.name,s.trigramme,lmf.resource_id order by color desc",be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:r,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return w(e.response.results.A.tables[0].rows)})):(n="select lmc.resource_name, max(concat(c.level,':',c.hexcode)) as color, s.trigramme, lmc.resource_id as id from bytel_meteo.last_metric_cluster lmc inner join bytel_meteo.color c on lmc.color=c.name inner join bytel_meteo.link l on lmc.resource_id=l.cluster_id inner join bytel_meteo.site s on l.site_id=s.site_id inner join bytel_meteo.metric_definition md on lmc.metric_key=md.metric_key where md.type = '"+e+"' group by lmc.resource_name,l.site_id,s.name,s.trigramme,lmc.resource_id UNION SELECT lma.application_name,max(concat(c.level,':',c.hexcode)) as color,s.trigramme, a.application_id::text as id FROM bytel_meteo.last_metric_application lma JOIN bytel_meteo.application a ON lma.application_name=a.name JOIN bytel_meteo.virtual_machine vm ON a.application_id=vm.application_id JOIN bytel_meteo.link l ON a.application_id=l.application_id JOIN bytel_meteo.cluster cl ON l.cluster_id=cl.cluster_id JOIN bytel_meteo.site s ON l.site_id=s.site_id JOIN bytel_meteo.color c ON lma.color = c.name JOIN bytel_meteo.metric_definition md on lma.metric_key=md.metric_key WHERE s.trigramme = '"+t+"' AND md.type = '"+e+"' GROUP BY lma.application_name,s.trigramme,a.application_id UNION select lma.resource_name, max(concat(c.level,':',c.hexcode)) as color,s.trigramme, lma.resource_id as id from bytel_meteo.last_metric_application lma inner join bytel_meteo.color c on lma.color=c.name inner join bytel_meteo.metric_definition md on lma.metric_key=md.metric_key inner join bytel_meteo.application a ON lma.application_name=a.name JOIN bytel_meteo.virtual_machine vm ON a.application_id=vm.application_id join bytel_meteo.link l ON a.application_id=l.application_id join bytel_meteo.site s ON l.site_id=s.site_id where md.type = '"+e+"' and s.trigramme='"+t+"' group by lma.resource_name,l.site_id,s.name,s.trigramme,lma.resource_id order by color desc",be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:n,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return w(e.response.results.A.tables[0].rows)}))}function H(e,t,r,n,a,o){var i,l,c;2===o&&(i="SELECT dfm.timestamp_utc,dfm.value FROM bytel_meteo.dashboard_forecast_metric dfm JOIN bytel_meteo.link l ON dfm.resource_id = l.cluster_id JOIN bytel_meteo.cluster c ON l.cluster_id = c.cluster_id JOIN bytel_meteo.metric_definition md ON dfm.metric_key=md.metric_key WHERE md.domain='"+e+"' AND md.metric_key='"+t+"' AND c.cluster_id = '"+r+"' AND dfm.timestamp_utc >= (select max(timestamp_utc) from bytel_meteo.dashboard_metric) - INTERVAL '"+a+"' ",be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:i,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return C(e.response.results.A.tables[0].rows)})),"-1"===n?(l="SELECT dm.timestamp_utc,dm.value FROM bytel_meteo.dashboard_metric dm JOIN bytel_meteo.link l ON dm.resource_id = l.cluster_id JOIN bytel_meteo.cluster c ON l.cluster_id = c.cluster_id JOIN bytel_meteo.metric_definition md ON dm.metric_key=md.metric_key WHERE md.domain='"+e+"' AND md.metric_key='"+t+"' AND c.cluster_id = '"+r+"' AND timestamp_utc >= (select max(timestamp_utc) from bytel_meteo.dashboard_metric) - INTERVAL '"+a+"'",be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:l,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return C(e.response.results.A.tables[0].rows)})):(c="SELECT dam.timestamp_utc,dam.value FROM bytel_meteo.dashboard_application_metric dam JOIN bytel_meteo.virtual_machine vm ON dam.resource_name = vm.name WHERE dam.metric_key=(select mad.metric_key_vm from bytel_meteo.matrix_definition mad join bytel_meteo.metric_definition md on mad.metric_key=md.metric_key WHERE md.domain='"+e+"' AND md.metric_key='"+t+"') AND vm.vm_id = '"+r+"' AND timestamp_utc >= (select max(timestamp_utc) from bytel_meteo.dashboard_application_metric) - INTERVAL '"+a+"' ",be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:c,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return C(e.response.results.A.tables[0].rows)}))}""!==D&&(J=D),localStorage.setItem("metricFullName",J);function Z(e){return 30<e.length?e.substring(0,30)+"..":e.substring(0,30)}var Y=ue.useMemo(function(){var e=(new Date).getTime(),t={site:[]},r={resource_name:"",id:"",parent:"",props:[]},n="";if(void 0!==l&&void 0!==l[0]){r.resource_name=l[0][0],n=l[0][8];for(var a=0;a<l.length;a++){var o={type:"",domain:"",label:"",trunc:0,unit:"",hexcode:"",metric_key:""};n===l[a][8]?(o.type=l[a][1],o.domain=l[a][2],o.label=l[a][3],o.trunc=l[a][4],o.unit=l[a][5],o.hexcode=l[a][6],o.metric_key=l[a][9],r.id=l[a][8],r.parent=l[a][7],r.props.push(o)):(t.site.push(r),(r={resource_name:"",id:"",parent:"",props:[]}).resource_name=l[a][0],n=l[a][8],--a)}t.site.push(r)}var i=(new Date).getTime()-e;return console.log("Execution time: "+i),t},[l,f]),V=ue.useCallback(function(e){var t=e.children,r=e.value,n=e.index,a=Oe(e,["children","value","index"]);return ue.createElement("div",xe({role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},a),r===n&&ue.createElement(fe.Box,{p:3},ue.createElement(fe.Typography,null,t)))},[f]),K=ue.useCallback(function(t){var r="",n="",a="",o="",i="";return d.map(function(e){e[0]===t.data.column.name&&(o=e[1],i=e[2],r=e[3],n=e[4],a=e[5])}),ue.createElement("div",{className:"supCellContainer",style:{background:a,borderRadius:"5px",height:"100px",fontSize:i}},ue.createElement("span",{style:{fontFamily:r,color:o,fontWeight:n}},t.data.column.caption))},[d]),$=ue.useCallback(function(t){var r="",n="",a="",o="",i="";return d.map(function(e){e[0]===t.data.column.caption&&(r=e[1],i=e[2],n=e[3],a=e[4],o=e[5])}),ue.createElement("div",{className:"supCellContainer",style:{background:r,borderRadius:"3px"}},ue.createElement("div",{className:"supCellContent"},ue.createElement("span",{style:{fontFamily:n,color:o,fontWeight:a,fontSize:i}},t.data.column.caption)))},[d]),Q=ue.useCallback(function(t){var r="",n="",a="",o="";return d.map(function(e){e[0]===t.data.column.domain&&(r=e[1],n=e[3],a=e[4],o=e[5])}),ue.createElement("div",{className:"headerCellContainer",style:{background:r,borderRadius:"3px",paddingLeft:"4px",paddingRight:"4px"}},ue.createElement("div",{className:"cellContent"},ue.createElement("span",{style:{fontFamily:n,color:o,fontWeight:a}},t.data.column.caption)))},[d]),X=ue.useCallback(function(t){var r="",n="",a="",o="";d.map(function(e){e[0]===t.column.name&&(r=e[1],n=e[3],a=e[4],o=e[5])});for(var e=0;e<k.length;e++)if(void 0!==k[e][0]&&void 0!==k[e][1]&&t.key===k[e][3])return"-1"===t.data.parent?ue.createElement("div",{className:"rowCellContainer",style:{background:k[e][1].split(":")[1],borderRadius:"3px"}},ue.createElement("div",{className:"cellContent"},ue.createElement("span",{className:"titlesRow",style:{fontWeight:a,fontFamily:n}},ue.createElement(pe.Link,{style:{color:r},to:"/dashboard/"+ye.id+"/"+A+"/"+j+"/"+t.value+"?"+f+"?"+t.key,title:t.value},Z(t.value))))):ue.createElement("div",{className:"rowCellContainer",style:{background:k[e][1].split(":")[1],borderRadius:"3px"}},ue.createElement("div",{className:"cellContent"},ue.createElement("span",{className:"titlesRow",style:{fontWeight:a,fontFamily:n}},ue.createElement("div",{style:{color:r},title:t.value},Z(t.value)))));return ue.createElement("div",{className:"rowCellContainer",style:{background:o,borderRadius:"3px"}},ue.createElement("div",{className:"cellContent"},ue.createElement("span",{className:"titlesRow",style:{fontFamily:n,color:r,fontWeight:a}},ue.createElement("div",{style:{color:r},title:t.value},Z(t.value)))))},[d,k]);function ee(e){var t,r,n,a,o,i,l;console.log(e),"mainColumn"!==e.column.name&&"header"!==e.rowType&&(E(!0),O([e.column.domain,e.column.metricKey,e.key,e.data.parent]),H(e.column.domain,e.column.metricKey,e.key,e.data.parent,T,f),t=e.column.domain,r=e.column.metricKey,n=e.key,a=e.data.parent,2===f&&(o="SELECT dfm.metric_full_name FROM bytel_meteo.dashboard_forecast_metric dfm JOIN bytel_meteo.link l ON dfm.resource_id = l.cluster_id JOIN bytel_meteo.cluster c ON l.cluster_id = c.cluster_id JOIN bytel_meteo.metric_definition md ON dfm.metric_key=md.metric_key WHERE md.domain='"+t+"' AND md.metric_key='"+r+"' AND c.cluster_id = '"+n+"' AND dfm.timestamp_utc >= (select max(timestamp_utc) from bytel_meteo.dashboard_metric) - INTERVAL '1 hour' group by dfm.metric_full_name",be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:o,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return F(e.response.results.A.tables[0].rows)})),"-1"===a?(i="SELECT dm.metric_full_name FROM bytel_meteo.dashboard_metric dm JOIN bytel_meteo.link l ON dm.resource_id = l.cluster_id JOIN bytel_meteo.cluster c ON l.cluster_id = c.cluster_id JOIN bytel_meteo.metric_definition md ON dm.metric_key=md.metric_key WHERE md.domain='"+t+"' AND md.metric_key='"+r+"' AND c.cluster_id = '"+n+"' AND timestamp_utc >= (select max(timestamp_utc) from bytel_meteo.dashboard_metric) - INTERVAL '1 hour' group by dm.metric_full_name",be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:i,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return F(e.response.results.A.tables[0].rows)})):(l="SELECT dam.metric_full_name FROM bytel_meteo.dashboard_application_metric dam JOIN bytel_meteo.virtual_machine vm ON dam.resource_name = vm.name WHERE dam.metric_key = ( select mad.metric_key_vm from bytel_meteo.matrix_definition mad join bytel_meteo.metric_definition md on mad.metric_key=md.metric_key WHERE md.domain='"+t+"' AND md.metric_key='"+r+"') AND vm.vm_id = '"+n+"' AND timestamp_utc >= (select max(timestamp_utc) from bytel_meteo.dashboard_application_metric) - INTERVAL '1 hour' GROUP BY dam.metric_full_name",be.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(ye.datasources[0]),rawSql:l,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return F(e.response.results.A.tables[0].rows)})),localStorage.setItem("caption",e.column.caption),localStorage.setItem("clusterName",e.data.resource_name))}function te(){E(!1),I("1 hour"),C([0])}var re,ne=ue.useCallback(function(e,t,r){for(var n=[],a=e;a<t;a++)void 0!==c[a]&&c[a][1]===r&&n.push(ue.createElement(he.DevExTreeColumn,{caption:c[a][2],headerCellComponent:Q,dataField:"props",cellRender:B,alignment:"center",allowFixing:!0,allowSorting:!1,name:c[a][3],domain:r,metricKey:c[a][3]}));return n},[c,Q,B,f]),ae=ue.useCallback(function(){var t,r=[],n=0;return o.map(function(e){r.push(ue.createElement(he.DevExTreeColumn,{caption:e[0],headerCellComponent:$,alignment:"center",allowFixing:!0,allowSorting:!1},ne(n,e[1]+n+2,e[0]))),t=e[1],n=n+t-1}),r},[o,$,ne,f]),oe=[];h.map(function(e){var t={day:"",value:0};t.day=e[0],t.value=e[1],oe.push(t)}),void 0!==oe[0]&&(re=oe),console.log(re);var ie=Ee(ue,pe,fe,ye,be,he,re,d);function le(e){I(e.selectedItem.id)}function ce(e){H(x[0],x[1],x[2],x[3],e.value,f)}var se=ue.useCallback(function(){return ue.createElement(he.DevExTreeList,{id:"site",dataSource:Y.site,rootValue:-1,showBorders:!0,showRowLines:!0,allowColumnReordering:!1,allowColumnResizing:!1,columnAutoWidth:!0,columnWidth:"auto",columnResizingMode:"widget",style:{padding:"0px"},onCellClick:ee,keyExpr:"id",parentIdExpr:"parent",errorRowEnabled:!1,cacheEnabled:!0,height:L},ue.createElement(he.DevExTreeScrolling,{mode:"standard",useNative:!0}),ue.createElement(he.DevExTreeColumnChooser,{enabled:!1,mode:"select"}),ue.createElement(he.DevExTreeColumn,{caption:"CLUSTERS D'APPLICATIONS",dataField:"resource_name",fixed:!0,headerCellComponent:K,cellRender:X,minWidth:300,alignment:"center",allowSorting:!1,name:"mainColumn"}),ae())},[f,Y,X]);function me(){return ue.createElement(he.DevExSelectBox,{dataSource:q,value:T,valueExpr:"id",displayExpr:"Text",onValueChanged:ce,onSelectionChanged:le,displayValue:"Text"})}function de(){return ue.createElement(he.DevExPopup,{visible:g,onHiding:te,dragEnabled:!1,closeOnOutsideClick:!0,showCloseButton:!0,showTitle:!0,contentRender:ie,container:".grid-container",resizeEnabled:!0,width:900,height:450},ue.createElement(he.DevExPopupToolbarItem,{render:me,location:"before"}))}return console.log(f),ue.createElement(ue.Fragment,null,ue.createElement(fe.Paper,{elevation:2,className:"title"},ue.createElement(fe.Chip,{color:"primary",label:"Home",style:{fontWeight:"bold"},className:"back",onClick:function(){R.push("/dashboard/"+ye.id)}}),ue.createElement("div",{className:"navigationShip"},ue.createElement("p",{onClick:function(){R.push("/dashboard/"+ye.id+"?"+f)},style:{color:"blue",cursor:"pointer",display:"inline"}},"Carte de France"),ue.createElement("p",{style:{color:"blue",cursor:"pointer",display:"inline"},onClick:function(){return R.push("/dashboard/"+ye.id+"/"+A+"?"+f)}}," > ",A),ue.createElement("p",{style:{display:"inline"}}," > ",t.match.params.siteTrig)),ue.createElement("div",{className:"navigationShip"},ue.createElement("p",{style:{display:"inline"}},P))),ue.createElement(fe.AppBar,{position:"static",color:"default"},ue.createElement(fe.Tabs,{value:f,onChange:function(e,t){y(t)}},ue.createElement(fe.Tab,{className:"tabTitle",label:"Performance",onClick:ve(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z("performance",t.match.params.siteTrig),G("performance"),W("performance"),U("performance",t.match.params.siteTrig);case 4:case"end":return e.stop()}},e)}))}),ue.createElement(fe.Tab,{className:"tabTitle",label:"Capacité",onClick:ve(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z("capacity",t.match.params.siteTrig),G("capacity"),W("capacity"),U("capacity",t.match.params.siteTrig);case 4:case"end":return e.stop()}},e)}))}),ue.createElement(fe.Tab,{className:"tabTitle",label:"Forecast",onClick:ve(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z("FORECAST",t.match.params.siteTrig),G("FORECAST"),W("FORECAST"),U("FORECAST",t.match.params.siteTrig);case 4:case"end":return e.stop()}},e)}))}),ue.createElement(fe.Tab,{className:"tabTitle",label:"conformité"}))),ue.createElement(V,{value:f,index:0},de(),ue.createElement(se,null)),ue.createElement(V,{value:f,index:1},de(),ue.createElement(se,null)),ue.createElement(V,{value:f,index:2},de(),ue.createElement(se,null)),ue.createElement(V,{value:f,index:3},ue.createElement("svg",{width:"150pt",height:"150pt",viewBox:"0 0 320 320",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{marginTop:"6%",marginLeft:"auto",marginRight:"auto",width:"100%"}},ue.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 154.6 0.0 L 165.2 0.0 C 171.0 1.5 177.3 2.3 182.1 6.0 C 185.6 8.3 189.3 10.6 192.3 13.6 C 230.1 51.5 268.0 89.3 305.9 127.2 C 313.2 134.7 318.4 144.3 320.0 154.7 L 320.0 165.8 C 318.7 170.3 317.9 174.9 315.9 179.1 C 312.8 183.9 309.9 188.9 305.8 192.8 C 268.3 230.4 230.7 267.9 193.2 305.5 C 185.6 313.0 176.0 318.4 165.4 320.0 L 154.7 320.0 C 144.3 318.4 134.8 313.2 127.3 306.0 C 89.3 267.9 51.3 230.0 13.3 191.9 C 10.4 189.0 8.2 185.4 5.9 182.0 C 2.3 177.3 1.7 171.3 0.0 165.8 L 0.0 154.8 C 1.6 143.8 7.3 133.9 15.2 126.2 C 52.7 88.7 90.2 51.2 127.7 13.6 C 131.4 9.9 136.0 7.2 140.4 4.3 C 144.8 2.1 149.8 1.3 154.6 0.0 Z"}),ue.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 130.9 25.8 C 139.7 17.1 152.6 11.9 165.0 14.1 C 174.7 14.8 183.5 20.1 190.2 26.8 C 224.5 61.2 258.9 95.5 293.2 129.9 C 296.5 134.3 300.4 138.6 302.1 144.0 C 305.2 150.8 305.1 158.6 304.2 165.9 C 303.3 174.4 297.9 181.3 292.4 187.4 C 256.7 223.0 221.0 258.7 185.4 294.4 C 182.8 296.7 179.6 297.9 176.6 299.5 C 171.6 302.5 165.5 302.3 160.0 303.6 C 155.1 302.5 150.1 302.3 145.4 300.5 C 141.5 298.5 137.3 297.0 134.1 293.9 C 99.6 259.3 65.1 224.9 30.6 190.4 C 27.1 187.2 24.3 183.3 21.2 179.6 C 15.0 171.0 14.4 159.9 15.9 149.8 C 17.7 142.0 22.2 135.3 27.3 129.3 C 61.9 94.8 96.3 60.3 130.9 25.8 Z"}),ue.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 164.3 86.4 C 168.8 85.6 174.0 86.2 177.3 89.6 C 181.0 92.9 183.4 98.3 182.0 103.2 C 181.5 108.5 176.9 112.6 172.0 113.9 C 163.1 117.0 152.3 108.4 153.9 98.9 C 155.0 93.4 159.0 88.4 164.3 86.4 Z"}),ue.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 101.1 117.8 C 102.1 114.3 103.3 110.5 106.7 108.6 C 117.2 108.7 127.6 108.7 138.0 108.7 C 140.1 108.6 142.1 109.1 144.1 109.5 C 148.2 116.1 153.2 122.1 157.5 128.6 C 159.7 131.9 161.8 136.1 159.8 140.0 C 154.0 150.7 148.0 161.3 142.3 172.1 C 155.4 181.7 167.5 192.5 180.6 202.0 C 184.4 197.9 189.2 193.4 195.2 194.8 C 197.4 195.6 200.0 195.9 201.6 197.7 C 203.7 200.0 205.5 202.6 206.9 205.4 C 209.0 204.4 211.7 204.0 213.8 205.2 C 217.4 207.5 219.2 211.9 219.3 216.0 C 221.5 217.0 223.3 218.4 224.5 220.4 C 230.1 220.0 234.4 224.1 236.6 228.8 C 211.7 229.0 186.9 228.7 162.0 229.1 C 155.9 228.5 149.7 229.6 143.5 228.7 C 144.8 227.2 145.9 225.5 147.0 223.8 C 149.9 222.5 152.9 221.1 156.2 221.1 C 157.9 220.7 159.6 220.1 158.8 217.9 C 160.5 215.3 162.7 212.4 166.3 213.1 C 168.2 209.3 171.3 206.3 175.0 204.2 C 163.8 195.0 152.5 186.0 141.3 176.8 C 140.8 175.5 139.1 176.4 139.5 177.4 C 142.0 180.1 144.9 183.1 144.7 187.0 C 144.9 189.5 143.1 191.6 142.2 193.8 C 139.3 200.7 135.1 207.1 131.8 213.8 C 129.8 218.0 127.6 222.2 125.2 226.2 C 122.6 228.2 118.7 229.6 115.5 228.1 C 113.5 226.6 112.3 224.3 111.6 222.0 C 113.6 214.7 117.9 208.5 120.7 201.5 C 122.9 196.7 125.4 192.0 127.7 187.3 C 121.8 180.0 116.0 172.6 109.8 165.5 C 109.7 172.9 110.1 180.4 109.7 187.8 C 106.8 199.4 103.6 211.0 100.6 222.7 C 99.7 227.6 92.9 230.3 88.9 227.0 C 85.3 225.1 86.1 220.6 86.3 217.2 C 88.6 207.8 91.0 198.5 93.3 189.1 C 93.7 177.9 93.1 166.7 93.6 155.5 C 93.6 151.0 98.2 149.3 100.4 146.1 C 98.0 145.3 96.3 143.3 96.4 140.8 C 94.1 139.2 92.0 137.3 89.5 136.0 C 88.5 133.9 89.9 132.2 91.8 131.5 C 93.5 133.1 95.4 134.5 97.3 135.7 C 98.6 129.8 99.7 123.8 101.1 117.8 Z"}),ue.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 113.0 123.3 C 116.6 123.4 120.1 123.4 123.6 123.4 C 119.3 128.0 114.4 132.1 110.3 136.9 C 110.8 132.3 112.1 127.9 113.0 123.3 Z"}),ue.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 122.7 156.0 C 128.2 153.5 133.7 151.2 139.2 148.7 C 137.2 153.8 133.8 158.0 131.8 163.0 C 128.6 160.8 125.5 158.6 122.7 156.0 Z"}))))}};function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(0);var y=function(A,j,M,D,F){return function(e){var t=J(A.useState([0]),2),r=t[0],a=t[1],n=J(A.useState(e.match.params.clusterName),2),o=n[0],i=n[1],l=J(A.useState([0]),2),c=l[0],s=l[1],m=J(A.useState(e.location.search.split("?")[2]),2),d=m[0],u=m[1],p=J(A.useState(e.location.search.split("?")[2]),2),f=p[0],y=p[1],b=J(A.useState(parseInt(e.location.search.split("?")[1])),2),h=b[0],C=b[1],_=J(A.useState([0]),2),g=_[0],E=_[1],v=j.useHistory(),x=e.match.params.regionName,O=e.match.params.siteTrig,N=(decodeURI(e.match.params.clusterName),"Dernière mise à jour : "+(new Date).toLocaleString());function k(e,t){var r,n;"FORECAST"===t?(r="SELECT lmf.resource_name, med.type,med.domain,med.label, TRUNC(cast(lmf.value as decimal),2) as value, lmf.unit, c.hexcode,lmf.resource_id FROM bytel_meteo.matrix_definition mad JOIN bytel_meteo.last_metric_forecast lmf ON mad.metric_key = lmf.metric_key JOIN bytel_meteo.metric_definition med ON mad.metric_key = med.metric_key JOIN bytel_meteo.color c ON lmf.color = c.name WHERE resource_id ='"+e+"' AND med.type='"+t+"' GROUP BY lmf.resource_name, med.label, lmf.value,c.hexcode,type,med.domain,lmf.unit,lmf.resource_id ORDER BY resource_name, type, med.domain, med.label",F.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(D.datasources[0]),rawSql:r,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return a(e.response.results.A.tables[0].rows)})):(n="SELECT lmc.resource_name, type,med.domain,med.label, TRUNC(cast(lmc.value as decimal) ,2), lmc.unit, c.hexcode,lmc.resource_id FROM bytel_meteo.matrix_definition mad JOIN bytel_meteo.last_metric_cluster lmc ON mad.metric_key = lmc.metric_key JOIN bytel_meteo.metric_definition med ON mad.metric_key = med.metric_key JOIN bytel_meteo.color c ON lmc.color = c.name WHERE resource_id = '"+e+"' AND TYPE='"+t+"' GROUP BY lmc.resource_name, med.label, lmc.value,c.hexcode,type,med.domain,lmc.unit,lmc.resource_id ORDER BY lmc.resource_name, type, med.domain, med.label",F.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(D.datasources[0]),rawSql:n,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return a(e.response.results.A.tables[0].rows)}))}function w(e){var t,r;"FORECAST"===e?(t="select lmf.resource_name, max(concat(c.level,':',c.hexcode)) as color, s.trigramme,lmf.resource_id from bytel_meteo.last_metric_forecast lmf inner join bytel_meteo.color c on lmf.color=c.name inner join bytel_meteo.link l on lmf.resource_id=l.cluster_id inner join bytel_meteo.site s on l.site_id=s.site_id inner join bytel_meteo.metric_definition md on lmf.metric_key=md.metric_key where md.type = '"+e+"' group by lmf.resource_name,l.site_id,s.name,s.trigramme,lmf.resource_id order by color desc",F.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(D.datasources[0]),rawSql:t,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return s(e.response.results.A.tables[0].rows)})):(r="select lmc.resource_name, max(concat(c.level,':',c.hexcode)) as color, s.trigramme,lmc.resource_id  from bytel_meteo.last_metric_cluster lmc inner join bytel_meteo.color c on lmc.color=c.name inner join bytel_meteo.link l on lmc.resource_id=l.cluster_id inner join bytel_meteo.site s on l.site_id=s.site_id inner join bytel_meteo.metric_definition md on lmc.metric_key=md.metric_key where md.type = '"+e+"' group by lmc.resource_name,l.site_id,s.name,s.trigramme,lmc.resource_id order by color desc",F.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(D.datasources[0]),rawSql:r,format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return s(e.response.results.A.tables[0].rows)}))}function S(e){var t=e.children,r=e.value,n=e.index,a=P(e,["children","value","index"]);return A.createElement("div",q({role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},a),r===n&&A.createElement(M.Box,{p:3},A.createElement(M.Typography,null,t)))}function T(t,e){var r="",n="",a="",o="",i="",l="",c="",s="";return g.map(function(e){e[0]===t&&(r=e[1],n=e[3],a=e[4]),"cardContent"===e[0]&&(o=e[1],c=e[2],i=e[3],l=e[4],s=e[5])}),A.createElement(M.Card,{style:{marginBottom:"9px"}},A.createElement(M.CardContent,null,A.createElement(M.Typography,{color:"textSecondary",gutterBottom:!0,style:{color:"#ffffff",background:r,fontFamily:n,fontWeight:a,paddingLeft:"12px",borderRadius:"5px",width:"100%"},className:"cardST"},t),A.createElement(M.Typography,{color:"textSecondary",gutterBottom:!0},A.createElement(M.Grid,{container:!0,spacing:1},e.map(function(e){if(void 0!==e[2]&&e[2].includes(t))return A.createElement(M.Grid,{item:!0,xs:12,sm:2},A.createElement(M.Card,null,A.createElement(M.CardContent,{style:{height:"75px",background:o,fontWeight:l}},A.createElement(M.Typography,{style:{fontSize:c,fontFamily:i,color:s},gutterBottom:!0,align:"center"},e[3],A.createElement("br",null),A.createElement(M.Grid,{container:!0,spacing:1},A.createElement(M.Grid,{item:!0,xs:12})))),A.createElement(M.CardActions,{style:{background:e[6]}},A.createElement(M.Button,{size:"small",style:{marginLeft:"auto",marginRight:"auto",fontSize:c,fontWeight:l,padding:"0px"}},e[4]," ",e[5]))))})))))}A.useEffect(function(){0===h?(k(f,"performance"),w("performance")):1===h?(k(f,"capacity"),w("capacity")):2===h&&(k(f,"FORECAST"),w("FORECAST")),F.post("grafana",{methode:"POST",path:"tsdb/query",body:{queries:[{datasourceId:parseInt(D.datasources[0]),rawSql:"select * from bytel_meteo.style",format:"table"}]}}).then(function(e){return e.json()}).then(function(e){return E(e.response.results.A.tables[0].rows)})},[]);var I;function R(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}return console.log(r),A.createElement(M.MuiThemeProvider,null,A.createElement(M.Paper,{elevation:2,className:"title"},A.createElement(M.Chip,{color:"primary",label:"Home",style:{fontWeight:"bold"},className:"back",onClick:function(){return v.push("/dashboard/"+D.id+"?"+h)}}),""==O?A.createElement("div",{className:"navigationShip"},A.createElement("p",{onClick:function(){return v.push("/dashboard/"+D.id+"?"+h)},style:{color:"blue",cursor:"pointer",display:"inline"}},"Carte de france"),A.createElement("p",{style:{display:"inline"}}," > ",o," ")):A.createElement("div",{className:"navigationShip"},A.createElement("p",{onClick:function(){return v.push("/dashboard/"+D.id+"?"+h)},style:{color:"blue",cursor:"pointer",display:"inline"}},"Carte de france"),A.createElement("p",{onClick:function(){return v.push("/dashboard/"+D.id+"/"+x+"?"+h)},style:{color:"blue",cursor:"pointer",display:"inline"}}," > ",x),A.createElement("p",{onClick:function(){return v.push("/dashboard/"+D.id+"/"+x+"/"+O+"?"+h)},style:{color:"blue",cursor:"pointer",display:"inline"}}," > ",O),A.createElement("p",{style:{display:"inline"}}," > ",o," ")),A.createElement("div",{className:"navigationShip"},A.createElement("p",{style:{display:"inline"}},N)),A.createElement("div",{className:"navigationShip"},A.createElement(M.FormControl,{className:"customS"},A.createElement(M.Select,{labelId:"demo-simple-select-placeholder-label-label",value:d,id:"demo-simple-select-placeholder-label",displayEmpty:!1,onChange:function(e){u(e.target.value),y(e.target.value),console.log(e);var t=e.target.value;0===h?(k(t,"performance"),w("performance"),c.map(function(e){e[3]===t&&i(e[0])})):1===h?(k(t,"capacity"),w("capacity"),c.map(function(e){e[3]===t&&i(e[0])})):2===h&&(k(t,"FORECAST"),w("FORECAST"),c.map(function(e){e[3]===t&&i(e[0])}))}},(I=[],c.map(function(e){void 0!==e[1]&&(e[0]===d&&e[2]===O||e[2]===O)&&I.push(A.createElement(M.MenuItem,{value:e[3]},A.createElement("i",{className:"chip_good",style:{background:e[1].split(":")[1]}})," ",e[0]))}),I))))),A.createElement(M.AppBar,{position:"static",color:"default"},A.createElement(M.Tabs,{value:h,onChange:function(e,t){C(t)},"aria-label":"simple tabs example"},A.createElement(M.Tab,q({label:"Performance"},R(0),{onClick:function(){k(f,"performance"),w("performance")}})),A.createElement(M.Tab,q({label:"Capacité"},R(1),{onClick:function(){k(f,"capacity"),w("capacity")}})),A.createElement(M.Tab,q({label:"Forecast"},R(1),{onClick:function(){k(f,"FORECAST"),w("FORECAST")}})),A.createElement(M.Tab,q({label:"conformité"},R(1),{onClick:function(){return w("")}})))),A.createElement(S,{value:h,index:0},T("CPU",r),T("MEMORY",r),T("STORAGE",r),T("NETWORK",r)),A.createElement(S,{value:h,index:1},T("CPU",r),T("MEMORY",r),T("STORAGE",r)),A.createElement(S,{value:h,index:2},T("COSTING",r),T("CPU",r),T("MEMORY",r),T("STORAGE",r)),A.createElement(S,{value:h,index:3},A.createElement("svg",{width:"150pt",height:"150pt",viewBox:"0 0 320 320",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{marginTop:"6%",marginLeft:"auto",marginRight:"auto",width:"100%"}},A.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 154.6 0.0 L 165.2 0.0 C 171.0 1.5 177.3 2.3 182.1 6.0 C 185.6 8.3 189.3 10.6 192.3 13.6 C 230.1 51.5 268.0 89.3 305.9 127.2 C 313.2 134.7 318.4 144.3 320.0 154.7 L 320.0 165.8 C 318.7 170.3 317.9 174.9 315.9 179.1 C 312.8 183.9 309.9 188.9 305.8 192.8 C 268.3 230.4 230.7 267.9 193.2 305.5 C 185.6 313.0 176.0 318.4 165.4 320.0 L 154.7 320.0 C 144.3 318.4 134.8 313.2 127.3 306.0 C 89.3 267.9 51.3 230.0 13.3 191.9 C 10.4 189.0 8.2 185.4 5.9 182.0 C 2.3 177.3 1.7 171.3 0.0 165.8 L 0.0 154.8 C 1.6 143.8 7.3 133.9 15.2 126.2 C 52.7 88.7 90.2 51.2 127.7 13.6 C 131.4 9.9 136.0 7.2 140.4 4.3 C 144.8 2.1 149.8 1.3 154.6 0.0 Z"}),A.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 130.9 25.8 C 139.7 17.1 152.6 11.9 165.0 14.1 C 174.7 14.8 183.5 20.1 190.2 26.8 C 224.5 61.2 258.9 95.5 293.2 129.9 C 296.5 134.3 300.4 138.6 302.1 144.0 C 305.2 150.8 305.1 158.6 304.2 165.9 C 303.3 174.4 297.9 181.3 292.4 187.4 C 256.7 223.0 221.0 258.7 185.4 294.4 C 182.8 296.7 179.6 297.9 176.6 299.5 C 171.6 302.5 165.5 302.3 160.0 303.6 C 155.1 302.5 150.1 302.3 145.4 300.5 C 141.5 298.5 137.3 297.0 134.1 293.9 C 99.6 259.3 65.1 224.9 30.6 190.4 C 27.1 187.2 24.3 183.3 21.2 179.6 C 15.0 171.0 14.4 159.9 15.9 149.8 C 17.7 142.0 22.2 135.3 27.3 129.3 C 61.9 94.8 96.3 60.3 130.9 25.8 Z"}),A.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 164.3 86.4 C 168.8 85.6 174.0 86.2 177.3 89.6 C 181.0 92.9 183.4 98.3 182.0 103.2 C 181.5 108.5 176.9 112.6 172.0 113.9 C 163.1 117.0 152.3 108.4 153.9 98.9 C 155.0 93.4 159.0 88.4 164.3 86.4 Z"}),A.createElement("path",{fill:"#010102",stroke:"#010102","stroke-width":"0.09375",d:" M 101.1 117.8 C 102.1 114.3 103.3 110.5 106.7 108.6 C 117.2 108.7 127.6 108.7 138.0 108.7 C 140.1 108.6 142.1 109.1 144.1 109.5 C 148.2 116.1 153.2 122.1 157.5 128.6 C 159.7 131.9 161.8 136.1 159.8 140.0 C 154.0 150.7 148.0 161.3 142.3 172.1 C 155.4 181.7 167.5 192.5 180.6 202.0 C 184.4 197.9 189.2 193.4 195.2 194.8 C 197.4 195.6 200.0 195.9 201.6 197.7 C 203.7 200.0 205.5 202.6 206.9 205.4 C 209.0 204.4 211.7 204.0 213.8 205.2 C 217.4 207.5 219.2 211.9 219.3 216.0 C 221.5 217.0 223.3 218.4 224.5 220.4 C 230.1 220.0 234.4 224.1 236.6 228.8 C 211.7 229.0 186.9 228.7 162.0 229.1 C 155.9 228.5 149.7 229.6 143.5 228.7 C 144.8 227.2 145.9 225.5 147.0 223.8 C 149.9 222.5 152.9 221.1 156.2 221.1 C 157.9 220.7 159.6 220.1 158.8 217.9 C 160.5 215.3 162.7 212.4 166.3 213.1 C 168.2 209.3 171.3 206.3 175.0 204.2 C 163.8 195.0 152.5 186.0 141.3 176.8 C 140.8 175.5 139.1 176.4 139.5 177.4 C 142.0 180.1 144.9 183.1 144.7 187.0 C 144.9 189.5 143.1 191.6 142.2 193.8 C 139.3 200.7 135.1 207.1 131.8 213.8 C 129.8 218.0 127.6 222.2 125.2 226.2 C 122.6 228.2 118.7 229.6 115.5 228.1 C 113.5 226.6 112.3 224.3 111.6 222.0 C 113.6 214.7 117.9 208.5 120.7 201.5 C 122.9 196.7 125.4 192.0 127.7 187.3 C 121.8 180.0 116.0 172.6 109.8 165.5 C 109.7 172.9 110.1 180.4 109.7 187.8 C 106.8 199.4 103.6 211.0 100.6 222.7 C 99.7 227.6 92.9 230.3 88.9 227.0 C 85.3 225.1 86.1 220.6 86.3 217.2 C 88.6 207.8 91.0 198.5 93.3 189.1 C 93.7 177.9 93.1 166.7 93.6 155.5 C 93.6 151.0 98.2 149.3 100.4 146.1 C 98.0 145.3 96.3 143.3 96.4 140.8 C 94.1 139.2 92.0 137.3 89.5 136.0 C 88.5 133.9 89.9 132.2 91.8 131.5 C 93.5 133.1 95.4 134.5 97.3 135.7 C 98.6 129.8 99.7 123.8 101.1 117.8 Z"}),A.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 113.0 123.3 C 116.6 123.4 120.1 123.4 123.6 123.4 C 119.3 128.0 114.4 132.1 110.3 136.9 C 110.8 132.3 112.1 127.9 113.0 123.3 Z"}),A.createElement("path",{fill:"#ffff02",stroke:"#ffff02","stroke-width":"0.09375",d:" M 122.7 156.0 C 128.2 153.5 133.7 151.2 139.2 148.7 C 137.2 153.8 133.8 158.0 131.8 163.0 C 128.6 160.8 125.5 158.6 122.7 156.0 Z"}))))}};t.default=function(i,l,c,s,m,d){return function(){var e=u(i,l,c,s,m,d),t=p(i,l,c,s,m,d),r=f(i,l,c,s,m,d),n=y(i,l,c,s,m,d),a="/dashboard/"+s.id,o="/dashboard/"+s.id+"/";return console.log(s),i.createElement("div",null,i.createElement(l.BrowserRouter,null,i.createElement(l.Route,{path:a,exact:!0,component:e}),i.createElement(l.Route,{path:o+":regionName",exact:!0,component:t}),i.createElement(l.Route,{path:o+":regionName/:siteTrig",exact:!0,component:r}),i.createElement(l.Route,{path:o+":regionName/:siteTrig/:clusterName",exact:!0,component:n})))}}}]).default;